#+Author: hackrole
#+Email: daipeng123456@gmail.com
#+Date: 2014-05-05
#+TITLE:  关于mongodb地理位置查询小记


1) geo可以和其他字段生成联合索引

2) find($near)查询无法返回距离.

3) runcommand(geoNear)可以返回距离，不过这个距离不是经纬度计算出来的距离。
   1) 所以考虑通过坐标在客户端完成计算.

4) 使用2d搜应的$near查询只能返回100个文档，无论是count,还是skip都是如此

5) 使用2dsphere索引的查询无此限制,居于球面计算，距离更加精确，是2d索引的取代。

6) 地理位置索引不能和其他的特殊索引一起使用，如:$text

7) 对于分片服务器，不能使用near查询，要换成geonear命令或是$geoNear aggregation stage

8) geoNear只能返回按距离排序的稳定，必要时可能需要在内存中排序文档，会导致性能问题，可以考虑用$geowithin取代。

9) 分片服务器中，地理位置索引字段不能做为分片字段使用.




