<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <title>hackrole's note</title>
        <link rel="stylesheet" href="/theme/css/main.css" />

        <!--[if IE]>
            <script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">hackrole's note </a></h1>
                <nav><ul>
                    <li><a href="/category/misc.html">misc</a></li>
                </ul></nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="/vimbian-liang-xiang-guan.html">vim变量相关</a></h1>
<footer class="post-info">
        <abbr class="published" title="2016-01-08T14:35:44+08:00">
                Published: 五 08 一月 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/hackrole.html">hackrole</a>
        </address>
<p>In <a href="/category/misc.html">misc</a>.</p>
<p>tags: <a href="/tag/vim.html">vim</a> <a href="/tag/vimscript.html">vimscript</a> </p>
</footer><!-- /.post-info --><div class="section" id="id1">
<h2>概述</h2>
<p>vim里的变量通过let定义.</p>
<p>变量类型:</p>
<ol class="arabic simple">
<li>基本变量. let a = 'hello'</li>
<li>选项 let &amp;number = 1. let &amp;l:number=1</li>
<li>寄存器 let &#64;a='hello'</li>
</ol>
<p>变量的作用域:</p>
<ol class="arabic simple">
<li>script. let s:a = 'hello'</li>
<li>global. let g:a = 'hello'</li>
<li>buffer. let b:a = 'hello'</li>
</ol>
</div>
                </article>
            </aside><!-- /#featured -->
                <section id="content" class="body">
                    <h1>Other articles</h1>
                    <hr />
                    <ol id="posts-list" class="hfeed">

            <li><article class="hentry">
                <header>
                    <h1><a href="/redischi-jiu-hua-pei-zhi-xiang-guan.html" rel="bookmark"
                           title="Permalink to redis持久化配置相关">redis持久化配置相关</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-01-08T14:35:13+08:00">
                Published: 五 08 一月 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/hackrole.html">hackrole</a>
        </address>
<p>In <a href="/category/misc.html">misc</a>.</p>
<p>tags: <a href="/tag/redis.html">redis</a> <a href="/tag/redis_persistence.html">redis_persistence</a> <a href="/tag/redischi-jiu-hua.html">redis持久化</a> </p>
</footer><!-- /.post-info -->                <p class="first last">redis持久化配置相关</p>

                <a class="readmore" href="/redischi-jiu-hua-pei-zhi-xiang-guan.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/redisfu-wu-guan-li-xu-yao.html" rel="bookmark"
                           title="Permalink to redis服务管理需要">redis服务管理需要</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-01-08T14:34:49+08:00">
                Published: 五 08 一月 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/hackrole.html">hackrole</a>
        </address>
<p>In <a href="/category/misc.html">misc</a>.</p>
<p>tags: <a href="/tag/redis.html">redis</a> </p>
</footer><!-- /.post-info -->                <p>介绍一些redis部署时的注意事项</p>
<div class="section" id="id1">
<h2>注意事项</h2>
<ol class="arabic simple">
<li>建议使用linux部署。</li>
<li>sysctl vm.overcommit_memory=1 或者 vm.overcommit_memory = 1 (/etc/sysctl.conf)</li>
<li>echo never &gt; /sys/kernel/mm/transparent_hugepage/enabled</li>
<li>设置一个和内存一样大或更大的swap分区，不然redis有可能在内存不足时被系统杀死。</li>
<li>设置一个明确的maxmemory. 这样redis会在内存到限后抛出错误，而不会falling.</li>
<li>在写比较重的场景下需要有大约2倍于normal的内存。这些是来在内存中保留那些需要被写回磁盘的数据.</li>
<li>配置supervisor类工具时，设置 daemonize no</li>
<li>开启slave特性时，即便不使用持久化特性,redis也会perform RDB save. 除非使用实验性的diskless-sync.</li>
<li>开启slaev特性时，要确保要么开发master节点的保存特性，要么关闭master节点的自动重启。</li>
<li>注意开发redis安全相关配置. require-pass/rewrite-command/bind-ip</li>
</ol>
</div>
<div class="section" id="aws">
<h2>aws注意事项</h2>
<ol class="arabic simple">
<li>使用HWS实例，不要使用pv实例</li>
<li>不要使用太老的实例。 m3 ...</li></ol></div>
                <a class="readmore" href="/redisfu-wu-guan-li-xu-yao.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/linuxubuntuxia-an-zhuang-mongodbfu-wu-qi.html" rel="bookmark"
                           title="Permalink to linux(ubuntu)下安装mongodb服务器">linux(ubuntu)下安装mongodb服务器</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-01-08T14:34:30+08:00">
                Published: 五 08 一月 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/hackrole.html">hackrole</a>
        </address>
<p>In <a href="/category/misc.html">misc</a>.</p>
<p>tags: <a href="/tag/mongodb.html">mongodb</a> </p>
</footer><!-- /.post-info -->                <div class="section" id="id1">
<h2>概述</h2>
<p>安装过程可以参考观望，文档很详细.</p>
<p>ubuntu官网源有提供mongodb安装，但是一般版本都比较落后，更新不及时。
所以可以采用mongodb提供的安装源，安装最新的mongodb.</p>
<p>mongodb只为64-bit的长期支持版本提供安装源，即ubuntu12.04/ubuntu14.04. 其他版本也许可以使用，但是不推荐。</p>
<p>mongodb官网有5个主要的包:
1) mongodb-dev. meta-pacage. 自动安装其他四个包.
2) mongodb-org-server. mongod-daemon以及配置文件/init脚本
3) mongodb-org-mongos. mongos-daemon.
4) mongodb-org-shell. mongo-shell
5) mongodb-org-tools. mongoimport/mongodump/bsondump/mongoexport/retore/stat/perf/oplog等工具.</p>
</div>
<div class="section" id="id2">
<h2>安装过程</h2>
<p>具体过程如下:</p>
<pre class="literal-block">
# import mongodb GPK key
sudo apt-key adv --keyserver ...</pre></div>
                <a class="readmore" href="/linuxubuntuxia-an-zhuang-mongodbfu-wu-qi.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/ru-he-mock-requestsmo-kuai.html" rel="bookmark"
                           title="Permalink to 如何mock requests模块">如何mock requests模块</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-01-08T14:33:44+08:00">
                Published: 五 08 一月 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/hackrole.html">hackrole</a>
        </address>
<p>In <a href="/category/misc.html">misc</a>.</p>
<p>tags: <a href="/tag/requests.html">requests</a> <a href="/tag/mock.html">mock</a> <a href="/tag/unittest.html">unittest</a> </p>
</footer><!-- /.post-info -->                <p>requests模块是非常好用的python http处理模块，使用场景很长广。
但是暂时不能自己创建Response导致mock不太方便.</p>
<p>通过搜索发现了两个lib可以处理.</p>
<p>httpretty/responses</p>
<p>httpretty模块是模仿ruby的FakeWeb所写.
responses模块是作者在使用httpretty时遇到问题，最后自己实现的一个less-featury版本.</p>
<p>两个模块亲测都可以使用，而且语法很相似，可以使用decoreate/with-context/start()+stop()语法，
使用很方便.</p>
<p>并且可以对不同的url,设置mock为不同的response,支持url正则语法等.</p>
<p>responses只有几百行代码，有时间可以读读源码.</p>
<p>通过httpretty，知道还有一个新的pip库curding, 具体待研究</p>

                <a class="readmore" href="/ru-he-mock-requestsmo-kuai.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/androidkai-fa-qi-bu.html" rel="bookmark"
                           title="Permalink to android开发起步">android开发起步</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-01-08T14:32:47+08:00">
                Published: 五 08 一月 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/hackrole.html">hackrole</a>
        </address>
<p>In <a href="/category/misc.html">misc</a>.</p>
<p>tags: <a href="/tag/android.html">android</a> <a href="/tag/android-sdk.html">android-sdk</a> <a href="/tag/get-started.html">get-started</a> </p>
</footer><!-- /.post-info -->                <p class="first last">linux(ubuntu)下搭建android开发环境.</p>

                <a class="readmore" href="/androidkai-fa-qi-bu.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/redisshu-ju-jie-gou-jie-shao.html" rel="bookmark"
                           title="Permalink to redis数据结构介绍">redis数据结构介绍</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-01-08T14:31:57+08:00">
                Published: 五 08 一月 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/hackrole.html">hackrole</a>
        </address>
<p>In <a href="/category/misc.html">misc</a>.</p>
<p>tags: <a href="/tag/redis.html">redis</a> <a href="/tag/data-type.html">data-type</a> </p>
</footer><!-- /.post-info -->                <p class="first last">redis中string/list/hash/set/sorted-set/bit介绍</p>

                <a class="readmore" href="/redisshu-ju-jie-gou-jie-shao.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/redisfu-zhi-pei-zhi-xiang-guan.html" rel="bookmark"
                           title="Permalink to redis复制配置相关">redis复制配置相关</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-01-08T14:31:05+08:00">
                Published: 五 08 一月 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/hackrole.html">hackrole</a>
        </address>
<p>In <a href="/category/misc.html">misc</a>.</p>
<p>tags: <a href="/tag/redis.html">redis</a> <a href="/tag/redis_slave.html">redis_slave</a> </p>
</footer><!-- /.post-info -->                <p>原内容来自redis官方文档:</p>
<pre class="literal-block">
redis-replication官方文档&lt;http://redis.io/topics/replication&gt;
</pre>
<p>基本来说，只要在配置文件里加上:</p>
<pre class="literal-block">
slaveof &lt;ip&gt; &lt;port&gt;
</pre>
<p>就可以完成配置.</p>
<p>如下配置可能有用:</p>
<pre class="literal-block">
repl-diskless-sync (不使用磁盘同步)
repl-diskless-sync-delay (同步前的延时, 以等待其他的要链接的slave)
</pre>
<div class="section" id="id1">
<h2>安全问题</h2>
<p>如果redis开启复制特性，同时master节点关闭持久化特性。
这时应该避免master节点的自动重启，避免slave节点上的数据被重启的master节点清空。</p>
</div>
<div class="section" id="id2">
<h2>同步策略</h2>
<p>redis默认使用磁盘同步, 数据被存到RDB file文件, 之后通过同步该文件做full-sync.</p>
<p>但是如果磁盘太慢会导致性能不好，2.8新增直接通过socket来同步的方式.(该方式目前仍然是实验阶段)</p>
</div>
<div class="section" id="id3">
<h2>只读复制</h2>
<p>redis默认slave是只读的,所有写操作会报错.
通过如下方式可以打开读写:</p>
<pre class="literal-block">
slave-read-only no (配置文件)
config set slave-read-only no (redis-cli运行时)
</pre>
<p>即便是只读slave也不应该暴露在公网下.
debug/config等命令仍会带来完全问题(使用rename-command配置)</p>
<p>读写slave在较少场景下会有用 ...</p></div>
                <a class="readmore" href="/redisfu-zhi-pei-zhi-xiang-guan.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/reactqi-bu-xu-zhi.html" rel="bookmark"
                           title="Permalink to react起步须知">react起步须知</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-01-08T14:26:01+08:00">
                Published: 五 08 一月 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/hackrole.html">hackrole</a>
        </address>
<p>In <a href="/category/misc.html">misc</a>.</p>
<p>tags: <a href="/tag/react.html">react</a> <a href="/tag/browserify-debug.html">browserify-debug</a> <a href="/tag/react-get-started.html">react-get-started</a> </p>
</footer><!-- /.post-info -->                <p class="first last">总结react起步需要的内容.</p>

                <a class="readmore" href="/reactqi-bu-xu-zhi.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/ru-he-zheng-que-de-shi-yong-stackoverflow.html" rel="bookmark"
                           title="Permalink to 如何正确的使用stackoverflow">如何正确的使用stackoverflow</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-01-08T14:25:23+08:00">
                Published: 五 08 一月 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/hackrole.html">hackrole</a>
        </address>
<p>In <a href="/category/misc.html">misc</a>.</p>
<p>tags: <a href="/tag/stackoverflow.html">stackoverflow</a> <a href="/tag/how-to-ask-a-question.html">how-to-ask-a-question</a> <a href="/tag/ask-for-help.html">ask-for-help</a> </p>
</footer><!-- /.post-info -->                <div class="section" id="id1">
<h2>关于屏蔽</h2>
<p>stackoverflow会自动屏蔽那些问了太多低质量问题的用户，阻止他们继续提出问题。
具体算法没有公开。但是基本是根据用户问题里的down-voted/zero-voted/deleted-posts量来定。
一两个低质量的问题不会被屏蔽。</p>
<p>被屏蔽后不能提问题，但是不影响其他功能.</p>
</div>
<div class="section" id="baned">
<h2>如何脱离baned</h2>
<p>只有作出一定的贡献才能脱离baned. baned是永久的，不会超时。</p>
<ol class="arabic simple">
<li>不要问已存在的问题，问之前先试试stackoverflow的搜索功能.</li>
<li>注意问题的语法和单词拼写检查.</li>
<li>适当的格式化代码，保持可读性.</li>
<li>提供及可能多的细节，和已做的努力。</li>
<li>大声读出你的问题，确保能让他人理解你的问题.</li>
</ol>
</div>
<div class="section" id="id2">
<h2>良好的提问习惯</h2>
<ol class="arabic simple">
<li>search and research. 保持search记录，让其他人知道为什么你的问题与他人的问题有所不同.</li>
<li>写一个好的标题.
1) 简短准确的概述你的问题，并和其他的问题标题有所不同.
2) 拼写检查，语法,标点很重要.
3) 如果你不好总结你的标题，可以在最后处理.</li>
<li>在贴代码和异常前，先描述你的问题。让其他人能更容易理解你的问题.</li>
<li>帮助他人重现你的问题.
1) 代码要尽可能短小，不包含太多无关内容.
2) 借助jsfiddle.com等第三方代码分享平台 ...</li></ol></div>
                <a class="readmore" href="/ru-he-zheng-que-de-shi-yong-stackoverflow.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>
                </ol><!-- /#posts-list -->
<p class="paginator">
    Page 1 / 3
        <a href="/index2.html">&raquo;</a>
</p>
                </section><!-- /#content -->
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>blogroll</h2>
                        <ul>
                            <li><a href="http://getpelican.com/">Pelican</a></li>
                            <li><a href="http://python.org/">Python.org</a></li>
                            <li><a href="http://jinja.pocoo.org/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>