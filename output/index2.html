<!DOCTYPE html>
<html lang="zh">
<head>
        <meta charset="utf-8" />
        <title>hackrole's note</title>
        <link rel="stylesheet" href="/theme/css/main.css" />

        <!--[if IE]>
            <script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">hackrole's note </a></h1>
                <nav><ul>
                    <li><a href="/category/misc.html">misc</a></li>
                </ul></nav>
        </header><!-- /#banner -->

                <section id="content" class="body">
                    <ol id="posts-list" class="hfeed" start="9">
            <li><article class="hentry">
                <header>
                    <h1><a href="/pythonzhong-shi-yong-withlai-jian-shao-dai-ma-zhong-fu.html" rel="bookmark"
                           title="Permalink to python中使用with来减少代码重复">python中使用with来减少代码重复</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-01-08T15:36:07+08:00">
                Published: 五 08 一月 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/hackrole.html">hackrole</a>
        </address>
<p>In <a href="/category/misc.html">misc</a>.</p>
<p>tags: <a href="/tag/python.html">python</a> </p>
</footer><!-- /.post-info -->                <div class="section" id="python-with">
<h2>python with的执行流程</h2>
<pre class="literal-block">
#+BEGIN_SRC python
with &lt;context&gt; as &lt;v&gt;:
    &lt;do things or raise Exception&gt;
#+END
</pre>
<p>with &lt;context&gt; as v:</p>
<ol class="arabic simple">
<li>先加载__exit__函数，如果context里没有实现，会在这里报错的</li>
<li>执行__enter__方法,并把结果传给v</li>
<li>执行用户代码,如果正常推出,使用(None, None, None)调用__exit__,
如果代码抛出异常，使用(type, exception, traceback)调用__exit__</li>
</ol>
<p>由上可以看出通过在代码里抛出特定异常，在__exit__里在下异常检测，
可以实现重用户代码向__exit__传递参数的作用.</p>
</div>
<div class="section" id="id1">
<h2>例子</h2>
<pre class="literal-block">
#+BEGIN_SRC python


#+END
</pre>
</div>

                <a class="readmore" href="/pythonzhong-shi-yong-withlai-jian-shao-dai-ma-zhong-fu.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/pythonshu-ju-fen-xi-twitterxiang-guan.html" rel="bookmark"
                           title="Permalink to python数据分析twitter相关">python数据分析twitter相关</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-01-08T15:35:14+08:00">
                Published: 五 08 一月 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/hackrole.html">hackrole</a>
        </address>
<p>In <a href="/category/misc.html">misc</a>.</p>
<p>tags: <a href="/tag/python.html">python</a> <a href="/tag/data_analizer.html">data_analizer</a> <a href="/tag/social_data.html">social_data</a> </p>
</footer><!-- /.post-info -->                <p>twitter提供了一系列的api使得可以通过api来分析twitter数据，获取最热话题等.
主要用于社交化数据分析. python端有python-twitter模块包装了常用的twitter api.</p>
<div class="section" id="id1">
<h2>代理问题</h2>
<p>国内由于长城网的关系，twitter被屏蔽. python-twitter也没法使用.
所幸最近看issues, 代理问题是否已经有其他的commit解决，并合并.</p>
<p>使用export http_proxy环境变量的方式来使用.</p>
</div>
<div class="section" id="twitter-python-twitter">
<h2>区分twitter/python-twitter的区别</h2>
<p>twitter是官网放出来的包, python-twitter是github上开源的代码。
有时间比较下两者的区别和优劣.</p>
</div>

                <a class="readmore" href="/pythonshu-ju-fen-xi-twitterxiang-guan.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/django-generic-viewshi-yong-bi-ji.html" rel="bookmark"
                           title="Permalink to django generic-view使用笔记">django generic-view使用笔记</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-01-08T15:32:35+08:00">
                Published: 五 08 一月 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/hackrole.html">hackrole</a>
        </address>
<p>In <a href="/category/misc.html">misc</a>.</p>
<p>tags: <a href="/tag/django.html">django</a> <a href="/tag/style.html">style</a> </p>
</footer><!-- /.post-info -->                <p>做了一个django app, 由于数据库使用mongodb, 所以没法使用django-admin. 就自己写了个admin.
起初用的是最简单的一个视图一个函数，forms/generic-view都没用。但是问题很明显，容易出现bug，代码重复度很高。</p>
<p>后来改用django-generic view配合forms, 总的来是开发效率和代码质量确实会有不错的提升，但是相对的，代码逻辑被分散在各处，
即便是自己写的代码，过一段时间回头看都有点看不太懂。</p>
<p>所以这里坐下笔记，整理下django generic-view的功能和流程, 以及自己开发过程中的一些感想，以备后用.</p>
<div class="section" id="django-rest-framework">
<h2>与django-rest-framework的对比</h2>
<p>django-rest-framework里也有类似generic-view的概念。
两者的目的比较相似，都是为了减少重复代码，加快开发速度.</p>
<p>比较大的区别是:  适用目标不同.
django-rest-framework的目标是api接口，所以使用了get/post/delete/put/等method, 设计上就想是对一个model的CURD操作的映射。
django-generic-view的目标是web界面，所以只使用了get/post方法，设计上也不是一眼就能看出每个类的目的。</p>
</div>
<div class="section" id="id1">
<h2>django-generic-view主要组成</h2>
<div class="section" id="view-templateview-redirectview-staticview">
<h3>最基础的View/TemplateView/RedirectView/StaticView等</h3>
</div>
<div class="section" id="listview">
<h3>listView</h3>
<p>提供对象列表视图</p>
</div>
<div class="section" id="detailview">
<h3>detailView</h3>
<p>单个对象的详情视图 ...</p></div></div>
                <a class="readmore" href="/django-generic-viewshi-yong-bi-ji.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/muscabi-ji.html" rel="bookmark"
                           title="Permalink to musca笔记">musca笔记</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-01-08T15:31:41+08:00">
                Published: 五 08 一月 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/hackrole.html">hackrole</a>
        </address>
<p>In <a href="/category/misc.html">misc</a>.</p>
<p>tags: <a href="/tag/musca.html">musca</a> <a href="/tag/linux.html">linux</a> </p>
</footer><!-- /.post-info -->                <div class="section" id="id1">
<h2>简介</h2>
<p>musca 是一个平铺式的窗口管理工具(WM). 使用纯键盘操作.</p>
</div>
<div class="section" id="id2">
<h2>安装</h2>
<div class="section" id="debian-7">
<h3>debian 7</h3>
<ol class="arabic simple">
<li>下载dmenu源码，编译安装</li>
<li>下载musca源码，编译安装</li>
<li>创建/usr/share/sessions/musca.desktop文件</li>
</ol>
</div>
<div class="section" id="ubuntu">
<h3>ubuntu高版本下</h3>
<p>基本同debian,不过要修改配置文件把*.c放到-l前面才能编译通过,不过仍然有不少警告.</p>
</div>
</div>
<div class="section" id="id3">
<h2>使用</h2>
<div class="section" id="id4">
<h3>基本键位</h3>
<div class="line-block">
<div class="line">key                    | desc                  |</div>
<div class="line">W-t                    | open a terimal        |</div>
<div class="line">W-h                    | split h               |</div>
<div class="line">W-v                    | split v               |</div>
<div class="line">W-r                    | close split           |</div>
<div class="line">W-o                    | only split            |</div>
<div class="line">W-g                    | show/switch win-group |</div>
<div class="line">W-m                    | exec musca ...</div></div></div></div>
                <a class="readmore" href="/muscabi-ji.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/mnesiayong-hu-shou-ce-guan-fang-wen-dang.html" rel="bookmark"
                           title="Permalink to mnesia用户手册(官方文档)">mnesia用户手册(官方文档)</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-01-08T15:30:37+08:00">
                Published: 五 08 一月 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/hackrole.html">hackrole</a>
        </address>
<p>In <a href="/category/misc.html">misc</a>.</p>
<p>tags: <a href="/tag/erlang.html">erlang</a> <a href="/tag/mnesia.html">mnesia</a> </p>
</footer><!-- /.post-info -->                <div class="section" id="id1">
<h2>mnesia用户手册</h2>
<p>mnesia是一个分布式数据库</p>
<div class="section" id="id2">
<h3>介绍</h3>
<p>本文档描述mnesia数据库, mnesia是一个分布式数据库系统.
是OTP系统的一部分.</p>
</div>
<div class="section" id="id3">
<h3>关于mnesia</h3>
</div>
</div>

                <a class="readmore" href="/mnesiayong-hu-shou-ce-guan-fang-wen-dang.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/miao-yu-lian-zhu.html" rel="bookmark"
                           title="Permalink to 妙语连珠">妙语连珠</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-01-08T15:30:06+08:00">
                Published: 五 08 一月 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/hackrole.html">hackrole</a>
        </address>
<p>In <a href="/category/misc.html">misc</a>.</p>
<p>tags: <a href="/tag/dongman.html">dongman</a> <a href="/tag/dream.html">dream</a> </p>
</footer><!-- /.post-info -->                <ul class="simple">
<li>但凡有想抓在手中的东西,必须要有弄脏双手的觉悟.</li>
</ul>

                <a class="readmore" href="/miao-yu-lian-zhu.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/httpxie-yi-yu-restful-apishe-ji.html" rel="bookmark"
                           title="Permalink to http协议与restful-api设计">http协议与restful-api设计</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-01-08T15:25:47+08:00">
                Published: 五 08 一月 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/hackrole.html">hackrole</a>
        </address>
<p>In <a href="/category/misc.html">misc</a>.</p>
<p>tags: <a href="/tag/http.html">http</a> <a href="/tag/restful.html">restful</a> <a href="/tag/api.html">api</a> </p>
</footer><!-- /.post-info -->                <div class="section" id="http">
<h2>http简介</h2>
<div class="section" id="id1">
<h3>http请求过程</h3>
<ol class="arabic simple">
<li>基于tcp3次握手</li>
<li>发送http请求获取http响应</li>
<li>断链接</li>
</ol>
</div>
<div class="section" id="id2">
<h3>http基本概念</h3>
<div class="section" id="uri-identify">
<h4>URI identify</h4>
<ol class="arabic simple">
<li>URL location<ol class="loweralpha">
<li>方案</li>
<li>用户</li>
<li>密码</li>
<li>主机</li>
<li>断后</li>
<li>路径</li>
<li>参数</li>
<li>查询</li>
<li>片段</li>
</ol>
</li>
<li>URN name 未流行</li>
</ol>
</div>
<div class="section" id="id3">
<h4>http方法</h4>
<ol class="arabic simple">
<li>GET</li>
<li>POST</li>
<li>delete</li>
<li>PUT</li>
<li>head</li>
<li>options</li>
<li>trace</li>
<li>patch</li>
</ol>
<div class="section" id="webdev">
<h5>webDev扩展</h5>
<p>lock/copy/move</p>
</div>
</div>
<div class="section" id="id4">
<h4>http状态</h4>
<ol class="arabic simple">
<li>100/101-&gt; procotol update</li>
<li>200 ok/201 created/202 accept/204 not content</li>
<li>300错选 ...</li></ol></div></div></div>
                <a class="readmore" href="/httpxie-yi-yu-restful-apishe-ji.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/ru-he-yue-du-yuan-ma.html" rel="bookmark"
                           title="Permalink to 如何阅读源码">如何阅读源码</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-01-08T15:24:45+08:00">
                Published: 五 08 一月 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/hackrole.html">hackrole</a>
        </address>
<p>In <a href="/category/misc.html">misc</a>.</p>
<p>tags: <a href="/tag/read_source_code.html">read_source_code</a> <a href="/tag/style.html">style</a> </p>
</footer><!-- /.post-info -->                <div class="section" id="c">
<h2>如何阅读c源码项目</h2>
<ul class="simple">
<li>makefile强化</li>
<li>gcc基础/autotools了解</li>
<li>文档/实现说明/doxygen/网络资源</li>
<li>gdb/traceback/ main函数开始</li>
<li>编译调试运行</li>
<li>手动写，尝试，时间</li>
</ul>
</div>
<div class="section" id="id2">
<h2>阅读计划</h2>
<div class="section" id="redis">
<h3>redis</h3>
<p><strong>TODO</strong></p>
</div>
<div class="section" id="python2-7">
<h3>python2.7</h3>
<p><strong>TODO</strong></p>
</div>
</div>

                <a class="readmore" href="/ru-he-yue-du-yuan-ma.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/get_obj_or_404zhu-yi.html" rel="bookmark"
                           title="Permalink to get_obj_or_404注意">get_obj_or_404注意</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-01-08T15:22:47+08:00">
                Published: 五 08 一月 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/hackrole.html">hackrole</a>
        </address>
<p>In <a href="/category/misc.html">misc</a>.</p>
<p>tags: <a href="/tag/django.html">django</a> <a href="/tag/model.html">model</a> </p>
</footer><!-- /.post-info -->                <p>在写get_obj_or_404时的注意事项.</p>
<div class="section" id="querysetmodel">
<h2>最好使用queryset而不是model，这样有更好的灵活性.</h2>
<pre class="literal-block">
# BEGIN_SRC python
# object example
def get_obj_or_404(model, **kw):
    condition = Q(**kw)
    try:
        return model.objects.get(condition)
    except:
        raise NotFound(&quot;404, not found&quot;)
# queryset example
def get_obj_or_404(queryset, **kw):
    condition = Q(**kw)
    try:
        return queryset.get(condition)
    except:
        raise NotFound(&quot;404, not found&quot;)
#+END
</pre>
</div>
<div class="section" id="exception">
<h2>exception处理</h2>
<ol class="arabic simple">
<li>对可能的异常要分开处理，如 ...</li></ol></div>
                <a class="readmore" href="/get_obj_or_404zhu-yi.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/golang15bian-yi-shi-bai-ji-gvman-zhuang-golangbao-cuo.html" rel="bookmark"
                           title="Permalink to golang1.5编译失败及gvm安装golang报错">golang1.5编译失败及gvm安装golang报错</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-01-08T15:22:11+08:00">
                Published: 五 08 一月 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/hackrole.html">hackrole</a>
        </address>
<p>In <a href="/category/misc.html">misc</a>.</p>
<p>tags: <a href="/tag/golang.html">golang</a> <a href="/tag/gvm.html">gvm</a> <a href="/tag/golang15.html">golang1.5</a> </p>
</footer><!-- /.post-info -->                <p>golang现在使用两套编译安装策略。</p>
<p>golang1.4使用gcc编译。
golang1.5需要使用golang1.4编译</p>
<p>所以使用上需要先下载golang1.4编译安装。然后设置GOROOT_BOOTSTRAP变量为go1.4的主目录。</p>
<p>之后就可以编译golang1.5或是使用gvm安装golang了。</p>
<ol class="arabic simple">
<li>gvm使用前需要source ~/.gvm/bin/gvm.</li>
<li>gvm使用时最好配置下https代理，不然会很慢.</li>
</ol>

                <a class="readmore" href="/golang15bian-yi-shi-bai-ji-gvman-zhuang-golangbao-cuo.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>
                </ol><!-- /#posts-list -->
<p class="paginator">
        <a href="/index.html">&laquo;</a>
    Page 2 / 6
        <a href="/index3.html">&raquo;</a>
</p>
                </section><!-- /#content -->
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>blogroll</h2>
                        <ul>
                            <li><a href="http://getpelican.com/">Pelican</a></li>
                            <li><a href="http://python.org/">Python.org</a></li>
                            <li><a href="http://jinja.pocoo.org/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>